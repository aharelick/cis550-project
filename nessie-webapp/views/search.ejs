<!DOCTYPE html>
<html>
<head>
  <% include ./partials/head %>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/async/1.5.2/async.min.js"></script>
  <style>
    main .ui.container {
      margin-top: 50px;
    }
    #container {
      position: absolute;
      width: 100%;
      height: 100%;
    }
  </style>
</head>
<body>
  <header>
    <% include ./partials/header %>
  </header>

  <main>
    <div class="ui container">
      <div class="ui form">
        <div class="field">
          <input id="search_input" class="ui input" name="search-input">
        </div>
        <button id="searchButton" class="ui button middle aligned center" action="submit">Search files</button>
      </div>
      <div id="container"></div>
    </div>
  </main>
  <script>
    
    $('#search_input').on('input', function() {
      var input = $('#search_input').val();
      if (input) {
        $('#searchButton').addClass('teal');
      } else {
        $('#searchButton').removeClass('teal');
      }
    })

    $('#searchButton').click(function() {
      var input = $('#search_input').val();
      if (input) {
        searchTerm(input);
      } else {
        console.log('Enter search terms');
      }
    })

    var searchTerm = function(input) {
      $.ajax({
        url: '/user/search',
        type: 'POST',
        data: {searchTerms: input},
        conentType: 'application/json',
        success: function(data, textStatus, jqXHR) {
          console.log(data);
        },
        error: function(jqXHR, textStatus, err) {
          console.log(err);
        }
      })
    }

  </script>
</body>
</html>
